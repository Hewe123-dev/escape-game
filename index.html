<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Escape Game ‚Äì Mission Enzym (Freischaltung)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root { --accent: #3f51b5; }
    body { font-family: system-ui, Arial, sans-serif; margin: 0; background: #f7f7fb; color: #222; }
    header { position: sticky; top: 0; background: white; border-bottom: 1px solid #e5e5ee; padding: 12px 16px; z-index: 100; }
    .wrap { max-width: 900px; margin: 0 auto; padding: 0 16px; }
    .title { display: flex; align-items: center; gap: 12px; }
    .progress { height: 8px; background: #eaeaf3; border-radius: 999px; overflow: hidden; margin-top: 10px; }
    .bar { height: 100%; width: 0%; background: var(--accent); transition: width .3s ease; }
    .station { display: none; padding: 24px 0 220px; scroll-margin-bottom: 240px; }
    .station.active { display: block; }
    .navline { position: fixed; left: 0; right: 0; bottom: 0; background: white; border-top: 1px solid #e5e5ee; }
    .navline .wrap { display: flex; justify-content: space-between; align-items: center; gap: 8px; padding: 10px 16px; }
    button.nav { border: none; padding: 12px 16px; border-radius: 10px; background: var(--accent); color: white; cursor: pointer; font-weight: 600; }
    button.nav[disabled] { background: #c5cae9; cursor: not-allowed; }
    .step { font-size: 14px; color: #555; }
  
/* --- Mobile Enhancements --- */
@media (max-width: 640px) {
  .wrap { padding: 0 12px; }
  header .title h1 { font-size: 1rem; }
  .step { font-size: 12px; }
  .station { padding: 16px 0 260px; } /* extra bottom so footer won't cover inputs */
  .task { padding: 14px !important; }
  input, select, button { font-size: 16px !important; } /* prevent iOS zoom */
  .choice-button, button { min-height: 44px; }
  .navline .wrap { gap: 6px; }
  button.nav { flex: 1; min-height: 48px; font-size: 16px; }
  blockquote { margin: 8px 0; padding-left: 12px; }
  .dropzone { min-width: auto !important; width: 100% !important; min-height: 64px !important; }
}

/* Improve focus & tap targets */
button, .choice-button {
  touch-action: manipulation;
}

</style>
</head>
<body>
<header>
  <div class="wrap">
    <div class="title">
      <span>üéÆ</span>
      <h1 style="margin:0;font-size:1.1rem;">Escape Game: Mission Enzym</h1>
    </div>
    <div class="progress" aria-hidden="true"><div id="progressBar" class="bar"></div></div>
    <div class="step"><span id="stepLabel">Station 1 / 7</span></div>
  </div>
</header>

<main class="wrap">


<section class="station" data-step="0">
  <div style="display:flex; flex-direction:column; gap:16px; align-items:center; text-align:center; padding:24px 0 120px;">
    <h2 style="margin: 8px 0 0;">Escape Game: Enzym im Eis ‚Äì die biologische Uhr tickt</h2>
    <div style="max-width:840px; text-align:left; background:white; border:1px solid #e5e5ee; border-radius:12px; padding:16px 18px; line-height:1.55;">
      <h3 style="margin-top:0;">Hintergrundgeschichte</h3>
      <p>Bei einer Arktis-Expedition haben Forschende ein uraltes Enzym in einem eingefrorenen Bakterium entdeckt. Erste Analysen zeigen: Dieses Enzym k√∂nnte Krankheiten heilen und industrielle Reaktionen revolutionieren.</p>
      <p>Doch bevor es isoliert und aktiviert werden konnte, kam es zu einem Zwischenfall:</p>
      <p><strong>Ein pl√∂tzlicher Temperaturabfall hat das Labor versiegelt.</strong> Das Enzym droht endg√ºltig zerst√∂rt zu werden, wenn es nicht innerhalb der n√§chsten <strong>30 Minuten</strong> reaktiviert wird.</p>
      <p>Zum Gl√ºck wurde ein Sicherheitsprotokoll aktiviert: <em>Ein digitales Escape Game</em>, das nur von einer Person mit echtem Enzym-Verst√§ndnis geknackt werden kann.</p>
      <p style="margin: 0.6rem 0 0;"><strong>So geht's weiter:</strong> Lies die Aufgaben an jeder Station, l√∂se sie korrekt und klicke dann unten rechts auf <em>Weiter</em>. Viel Erfolg!</p>
    </div>
  </div>
</section>



<section class="station" data-step="0">
  <div class="task" style="background:white; padding:2rem; border-radius:12px; box-shadow:0 4px 8px rgba(0,0,0,0.1); max-width:700px; margin:auto;">
    <h2>üßä Hintergrundgeschichte</h2>
    <p>Bei einer Arktis-Expedition haben Forschende ein uraltes Enzym in einem eingefrorenen Bakterium entdeckt. Erste Analysen zeigen: Dieses Enzym k√∂nnte Krankheiten heilen und industrielle Reaktionen revolutionieren.</p>
    <p>Doch bevor es isoliert und aktiviert werden konnte, kam es zu einem Zwischenfall:</p>
    <p><strong>Ein pl√∂tzlicher Temperaturabfall hat das Labor versiegelt. Das Enzym droht endg√ºltig zerst√∂rt zu werden, wenn es nicht innerhalb der n√§chsten <span style="color:red;">XX</span> Minuten reaktiviert wird.</strong></p>
    <p>Zum Gl√ºck wurde ein Sicherheitsprotokoll aktiviert:</p>
    <blockquote style="font-style:italic;">Ein digitales Escape Game, das nur von einer Person mit echtem Enzym-Verst√§ndnis geknackt werden kann.</blockquote>
    <p style="text-align:center; font-weight:bold;">Deine Mission: L√∂se alle R√§tsel und rette das Enzym!</p>
  </div>
</section>

<section class="station" data-step="1">




  <meta charset="UTF-8">
  <title>Escape Game ‚Äì Station 1: Aminos√§uren sortieren</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background-color: #f4f6f8; }
    h1 { color: #2c3e50; }
    .task { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .draggable, .dropzone { padding: 10px; margin: 5px; border: 1px dashed #aaa; background: #e3f2fd; border-radius: 5px; display: inline-block; cursor: move; }
    .dropzone { min-width: 300px; min-height: 50px; background: #fff; border: 2px dashed #42a5f5; }
    .feedback { margin-top: 10px; font-weight: bold; }
    .hidden { display: none; }
    .hilfekarte { background: #e1f5fe; padding: 15px; margin-top: 20px; border-radius: 10px; }
    #input-section { margin-top: 2rem; }
    #input-section input { width: 80%; height: 60px; font-size: 1.2rem; }
  </style>



<h1>üß¨ Escape Game ‚Äì Station 1: Aminos√§uren sortieren</h1>
<div class="task">
  <p>Aufgabe: Bringe die folgenden Aminos√§uren anhand ihrer Seitenketten in die richtige Reihenfolge.</p>
  <blockquote>
    ‚ÄûDer leichteste Baustein beginnt die Reaktion. Es folgt der Methylierte. Danach der, der polar reagiert. Ganz zuletzt treffen die Gegens√§tze aufeinander: der Saure vor dem Basischen.‚Äú
  </blockquote>

  <div id="dragzone">
    <div class="draggable" draggable="true">Asparagins√§ure</div>
    <div class="draggable" draggable="true">Lysin</div>
    <div class="draggable" draggable="true">Glycin</div>
    <div class="draggable" draggable="true">Serin</div>
    <div class="draggable" draggable="true">Alanin</div>
  </div>

  <h3>Aminos√§uren-Reihenfolge:</h3>
  <div id="dropzone" class="dropzone"></div>
  <button onclick="s1_checkOrder()">Reihenfolge pr√ºfen</button>
  <p id="hinweis" class="feedback"></p>

  <p><a href="#" onclick="document.getElementById('hilfeKarte').classList.remove('hidden'); return false;">üÜò Hilfekarte 1 anzeigen</a></p>
  <div id="quersummeHint" class="hidden">
    <p>üîç Bilde die Summe aller Sauerstoffatome und daraus die Quersumme</p>
    <input id="eingabe" placeholder="Zahl eingeben">
    <button onclick="s1_checkCode()">Antwort pr√ºfen</button>
    <p id="feedback"></p>
    <p><a href="#" onclick="document.getElementById('hilfeKarte2').style.display='block'; return false;">üÜò </a></p>
  </div>

  <div id="hilfeKarte" class="hilfekarte hidden">
    <p>üÜò Hilfekarte: Mit Glycin beginnt es und mit Lysin h√∂rt es auf.</p>
  </div>
</div>

<script>
const richtigeReihenfolge = ["Glycin", "Alanin", "Serin", "Asparagins√§ure", "Lysin"];

function s1_checkOrder() {
  const dropzone = document.getElementById("dropzone");
  const items = Array.from(dropzone.children).map(el => el.textContent.trim());
  const hinweis = document.getElementById("hinweis");

  const quersummeHint = document.getElementById("quersummeHint");
  const hilfeKarte2 = document.getElementById("hilfeKarte2");

  const hilfekarte = document.getElementById("hilfeKarte");

  if (JSON.stringify(items) === JSON.stringify(richtigeReihenfolge)) {
    hinweis.innerText = "‚úîÔ∏è Die Reihenfolge stimmt!";
    quersummeHint.classList.remove("hidden");
    hilfekarte.classList.add("hidden");  // Hilfekarte ausblenden, wenn die Reihenfolge stimmt
  } else {
    hinweis.innerText = "‚ùå Die Reihenfolge ist noch nicht korrekt.";
    quersummeHint.classList.add("hidden");
      // Hilfekarte anzeigen, wenn die Reihenfolge falsch ist
  }
}

function s1_checkCode() {
  const input = document.getElementById("eingabe").value.trim();
  const feedback = document.getElementById("feedback");

  if (parseInt(input) === 4) {
    try { unlockNext(1); } catch(e){}
    feedback.innerText = "‚úÖ Richtig! Die erste Ziffer des Codes lautet: 4";
    feedback.style.color = "green";
  } else {
    feedback.innerText = "‚ùå Noch nicht richtig. Bilde die Summe aller Sauerstoffatome und daraus die Quersumme";
    feedback.style.color = "red";
  }
}

// Drag and Drop-Funktionalit√§t
document.querySelectorAll(".draggable").forEach(el => {
  el.addEventListener("dragstart", e => {
    e.dataTransfer.setData("text/plain", e.target.textContent);
  });
});

document.getElementById("dropzone").addEventListener("dragover", e => {
  e.preventDefault();
});
document.getElementById("dropzone").addEventListener("drop", e => {
  e.preventDefault();
  const text = e.dataTransfer.getData("text/plain");
  const newElem = document.createElement("div");
  newElem.textContent = text;
  newElem.className = "draggable";
  newElem.setAttribute("draggable", "true");
  newElem.addEventListener("click", () => newElem.remove());
  document.getElementById("dropzone").appendChild(newElem);
});
</script>




</section>
<section class="station" data-step="2">




  <meta charset="UTF-8">
  <title>Station 2 ‚Äì Das Geheimnis der Laktase</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f0fdf4; padding: 2rem; }
    .task { background: white; padding: 1rem; margin: 2rem auto; border-radius: 15px; max-width: 700px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .choice-button { padding: 0.5rem 1rem; background: #a5d6a7; margin: 0.5rem; border-radius: 8px; display: inline-block; cursor: pointer; }
    .choice-button:hover { background: #81c784; }
    input, button { margin-top: 1rem; padding: 0.5rem; width: 100%; }
  </style>


  <div class="task">
    <h2>üîÆ Station 2 ‚Äì Das Geheimnis der Laktase</h2>
    <p>Vier mystische Pergamentrollen enthalten uralte Hinweise zur Struktur eines besonderen Enzyms ‚Äì der Laktase. Nur wer die Ebenen der Struktur erkennt, kann das Geheimnis l√ºften.</p>
    <p><strong>Klicke auf die richtige L√∂sung.</strong></p>
<p style="font-style: italic;">üîç ‚ÄûAm Anfang war die Kette... dann begann sie sich zu winden, faltete sich und wartete still, bis der Milchzucker das aktive Zentrum fand.‚Äú</p>

    <div class="choice-container">
      <div class="choice-button" onclick="s2_verifyStructure('quart√§r-terti√§r-sekund√§r-prim√§r')">Quart√§r ‚Üí Terti√§r ‚Üí Sekund√§r ‚Üí Prim√§r</div>
      <div class="choice-button" onclick="s2_verifyStructure('prim√§r-sekund√§r-terti√§r-quart√§r')">Prim√§r ‚Üí Sekund√§r ‚Üí Terti√§r ‚Üí Quart√§r</div>
      <div class="choice-button" onclick="s2_verifyStructure('sekund√§r-prim√§r-quart√§r-terti√§r')">Sekund√§r ‚Üí Prim√§r ‚Üí Quart√§r ‚Üí Terti√§r</div>
    </div>
    <p id="structure-feedback" style="text-align:center; font-weight:bold;"></p>

    <div id="input-section" style="display:none;">
      <label for="input2">üî¢ Gib die ermittelte Zahl ein:</label>
      <input id="input2" type="text" placeholder="Zahl eingeben">
      <button onclick="s2_checkCode()">Best√§tigen</button>
      <p id="result2"></p>
    </div>
  </div>

  <div class="task" id="hilfe2" style="background:#f1f8e9; display:none">
    <h2>üÜò Hilfekarte Station 2</h2>
    <p>Die L√∂sung lautet: Prim√§r ‚Üí Sekund√§r ‚Üí Terti√§r ‚Üí Quart√§r.<br>
    Tipp: Z√§hle die Anzahl des Buchstabens ‚Äûr‚Äú in den vier Strukturbegriffen (Prim√§r, Sekund√§r, Terti√§r, Quart√§r).</p>
  </div>
  <p><a href="#" onclick="s2_toggleHilfe(); return false;">üìò Hilfekarte ein-/ausblenden</a></p>

  <script>
  function s2_s2_toggleHilfe() {
    const root = document.querySelector('.station[data-step="2"]');
    const hilfe = root.querySelector('#hilfe2');
    hilfe.style.display = (hilfe.style.display === 'none' || hilfe.style.display === '') ? 'block' : 'none';
  }

    function s2_verifyStructure(answer) {
      const root = document.querySelector('.station[data-step="2"]');
      const feedback = root.querySelector('#structure-feedback');
      const correct = 'prim√§r-sekund√§r-terti√§r-quart√§r';
      if (answer === correct) {
        feedback.innerHTML = "‚úîÔ∏è Richtig! Du hast den Aufbau entschl√ºsselt.<br><br><em>üîç N√§chster Hinweis: Z√§hle die Anzahl des Buchstabens 'r' in den vier Strukturbegriffen (Prim√§r, Sekund√§r, Terti√§r, Quart√§r). Das Ergebnis ist deine 2. Codeziffer.</em>";
        feedback.style.color = "green";
        root.querySelector('#input-section').style.display = 'block';
        try { root.querySelector('#input3').scrollIntoView({behavior:'smooth', block:'center'}); } catch(e){}
      } else {
        feedback.innerHTML = "‚ùå Leider falsch. Versuche es nochmal oder nutze die Hilfekarte.";
        feedback.style.color = "red";
        // root.querySelector('#hilfe2').style.display = 'block';
      }
    }

    function s2_checkCode() {
      const root = document.querySelector('.station[data-step="2"]');
      const userInput = root.querySelector('#input2').value.trim();
      const correct = 7;
      const output = root.querySelector('#result2');
      if (parseInt(userInput) === correct) {
        try { unlockNext(2); } catch(e){}
        output.innerHTML = '‚úÖ Korrekt! Du hast die zweite Ziffer des Codes richtig berechnet.';
        output.style.color = 'green';
      } else {
        output.innerHTML = '‚ùå Noch nicht richtig. Z√§hle die Anzahl des Buchstabens "r" in den vier Strukturbegriffen.';
        output.style.color = 'red';
      }
    }
  </script>



</section>
<section class="station" data-step="3">




  <meta charset="UTF-8">
  <title>Station 3 ‚Äì Die vier W√§chter</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f9fbe7; padding: 2rem; }
    .task { background: white; padding: 1rem; margin: 2rem auto; border-radius: 15px; max-width: 700px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .choice-button { padding: 0.5rem 1rem; background: #c5e1a5; margin: 0.5rem; border-radius: 8px; display: inline-block; cursor: pointer; }
    .choice-button:hover { background: #aed581; }
    input, button { margin-top: 1rem; padding: 0.5rem; width: 100%; }
    #input-section, #zahl-hinweis, #hilfe3 { display: none; }
  </style>


  <div class="task">
    <h2>üå± Station 3 ‚Äì Die vier W√§chter</h2>
    <p><strong>R√§tseltext:</strong> In einem alten Laborbuch steht geschrieben:</p>
    <p style="font-style: italic;">
      ‚ÄûVier W√§chter wachen √ºber das Wirken der Enzyme.<br>
      Der erste ist der W√§rmegeist ‚Äì zu hei√ü, zu kalt, zerst√∂rt er das Werk.<br>
      Der zweite ist der S√§uref√ºrst ‚Äì sein Zorn liegt im Milieu der Umgebung.<br>
      Der dritte ist der T√§uscher ‚Äì er tritt auf wie ein Schl√ºssel, doch stiehlt er nur Zeit.<br>
      Der vierte ist der Unterdr√ºcker ‚Äì fern vom Zentrum, doch l√§hmt er das Ganze.‚Äú<br>
      Nur wer ihre Rollen erkennt, kann das Enzym verstehen.
    </p>

    <p><strong>Klicke die richtige L√∂sung an:</strong></p>

    <div class="choice-container">
      <div class="choice-button" onclick="s3_verifyStation3('temperatur-reaktionsmilieu-substratbindung-allosterischeblockade')">Temperatur, Reaktionsmilieu, Substratbindung, allosterische Blockade</div>
      <div class="choice-button" onclick="s3_verifyStation3('reaktionsmilieu-temperatur-nichtkompetitivehemmung-kompetitivehemmung')">Reaktionsmilieu, Temperatur, nichtkompetitive Hemmung, kompetitive Hemmung</div>
      <div class="choice-button" onclick="s3_verifyStation3('substrat-wasser-kompetitivehemmung-temperatur')">Substrat, Wasser, kompetitive Hemmung, Temperatur</div>
      <div class="choice-button" onclick="s3_verifyStation3('temperatur-reaktionsmilieu-kompetitivehemmung-nichtkompetitivehemmung')">Temperatur, Reaktionsmilieu, kompetitive Hemmung, nichtkompetitive Hemmung</div>
    </div>
    <p id="feedback3" style="text-align:center; font-weight:bold;"></p>

    <div id="zahl-hinweis" style="margin-top:1rem;">
      <p><strong>Hinweis:</strong> Nimm jeweils den ersten Buchstaben jeder richtigen Einflussgr√∂√üe in der Reihenfolge der Antwort. Ersetze jeden Buchstaben durch seine Position im Alphabet (A=1, B=2, ..., Z=26). Addiere diese Zahlen. Die Quersumme dieser Summe ist deine dritte Ziffer. <strong>Die Quersumme muss zweimal gebildet werden.</strong></p>
    </div>

    <div id="input-section">
      <label for="input3">üî¢ Gib die ermittelte Zahl ein:</label>
      <input id="input3" type="text" placeholder="Zahl eingeben">
      <button onclick="s3_checkCode3()">Best√§tigen</button>
      <p id="result3"></p>
    </div>
  </div>

  <p><a href="#" onclick="s3_toggleHilfe3(); return false;">üìò Hilfekarte ein-/ausblenden</a></p>

<div class="task" id="hilfe3" style="background:#f1f8e9;">
    <h2>üÜò Hilfekarte Station 3</h2>
    <p><strong>Zur L√∂sung des R√§tsels:</strong><br>
      Temperatur beeinflusst die Molek√ºlbewegung, das Reaktionsmilieu (z.‚ÄØB. pH-Wert) die Ladungsverteilung.<br>
      Kompetitive Hemmstoffe √§hneln dem Substrat und blockieren das Zentrum.<br>
      Nichtkompetitive Hemmstoffe ver√§ndern die Struktur des Enzyms.
    </p>
  </div>

  <script>
  function s3_toggleHilfe3() {
    const hilfe = root.querySelector('#hilfe3');
    hilfe.style.display = (hilfe.style.display === 'none' || hilfe.style.display === '') ? 'block' : 'none';
  }

    function s3_verifyStation3(answer) {
      const correct = 'temperatur-reaktionsmilieu-kompetitivehemmung-nichtkompetitivehemmung';
      const root = document.querySelector('.station[data-step="3"]');
      const feedback = root.querySelector('#feedback3');
      if (answer === correct) {
        feedback.innerHTML = "‚úîÔ∏è Richtig! Du hast die vier W√§chter entschl√ºsselt.";
        feedback.style.color = "green";
        root.querySelector('#zahl-hinweis').style.display = 'block';
        root.querySelector('#input-section').style.display = 'block';
        try { root.querySelector('#input3').scrollIntoView({behavior:'smooth', block:'center'}); } catch(e){}
        root.querySelector('#hilfe3').style.display = 'none';
      } else {
        feedback.innerHTML = "‚ùå Leider falsch. Die Hilfekarte hilft dir weiter.";
        feedback.style.color = "red";
        // root.querySelector('#hilfe3').style.display = 'block';
      }
    }

    function s3_checkCode3() {
      const root = document.querySelector('.station[data-step="3"]');
      const input = root.querySelector('#input3').value.trim();
      const correct = 7;
      const result = root.querySelector('#result3');
      if (parseInt(input) === correct) {
        try { unlockNext(3); } catch(e){}
        result.innerHTML = '‚úÖ Korrekt! Du hast die dritte Ziffer des Codes ermittelt.';
        result.style.color = 'green';
      } else {
        result.innerHTML = '‚ùå Noch nicht richtig. √úberpr√ºfe die Hinweise sorgf√§ltig.';
        result.style.color = 'red';
      }
    }
  </script>



</section>
<section class="station" data-step="4">




  <meta charset="UTF-8" />
  <title>Escape Game - Station 4</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f2f2f2; padding: 2rem; }
    .task { background: #fff; padding: 1.5rem; border-radius: 10px; max-width: 700px; margin: auto; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h2 { color: #00695c; }
    button, .choice-button { padding: 0.6rem 1rem; margin: 0.5rem 0; font-size: 1rem; cursor: pointer; border: none; border-radius: 5px; background: #4db6ac; color: white; }
    .choice-button:hover { background: #00897b; }
    .hidden { display: none; }
    #hilfe4 { background: #e0f2f1; padding: 1rem; margin-top: 1rem; border-radius: 8px; }
    .success { color: green; }
    .error { color: red; }
  </style>


  <div class="task">
    <h2>‚ö° Station 4 ‚Äì Die energetische Barriere</h2>
    <p><strong>R√§tseltext:</strong> Eine mystische Skizze zeigt zwei Wege: einen steilen Berg und einen weichen Tunnel. Darunter steht:</p>
    <p><em>‚ÄûDer eine Weg verlangt Kraft, der andere nur den Schl√ºssel. Doch beide f√ºhren ans gleiche Ziel. Nur wer versteht, wie der Helfer wirkt, findet die n√§chste Ziffer.‚Äú</em></p>
    <p>Welche Aussage beschreibt <strong>korrekt</strong> die Rolle von Enzymen in Bezug auf die Aktivierungsenergie?</p>

    <div>
      <button class="choice-button" onclick="s4_verifyAnswer('a')">Enzyme erh√∂hen die Reaktionsgeschwindigkeit, indem sie mehr Energie zuf√ºhren.</button><br>
      <button class="choice-button" onclick="s4_verifyAnswer('b')">Enzyme senken die Aktivierungsenergie und beschleunigen so die Reaktion.</button><br>
      <button class="choice-button" onclick="s4_verifyAnswer('c')">Enzyme liefern Bindungsenergie und ver√§ndern die Reaktionsenthalpie.</button><br>
      <button class="choice-button" onclick="s4_verifyAnswer('d')">Enzyme machen eine Reaktion nur reversibel, ver√§ndern aber nicht die Energie.</button>
    </div>

    <p id="feedback"></p>

    <div id="zahl-section" class="hidden">
      <p><strong>Hinweis:</strong> Z√§hle alle Buchstaben im richtigen Antwortsatz ohne Leerzeichen. Subtrahiere davon die Anzahl der W√∂rter. Die Quersumme der Differenz ergibt die vierte Ziffer. (Beachte: Quersumme = Quersumme von Quersumme)</p>
      <label for="input4">üî¢ Deine L√∂sung:</label>
      <input id="input4" type="text" placeholder="Zahl eingeben">
      <button onclick="s4_checkCode()">Best√§tigen</button>
      <p id="result4"></p>
    </div>

    <p><a href="#" onclick="document.getElementById('hilfe4').style.display='block'; return false;">üÜò Hilfekarte anzeigen</a></p>
    <div id="hilfe4" class="hidden">
      <h3>üß™ Hilfekarte ‚Äì Aktivierungsenergie</h3>
      <p>Enzyme senken die Aktivierungsenergie, wodurch Reaktionen schneller ablaufen k√∂nnen, ohne dass die Reaktionsenthalpie ver√§ndert wird.</p>
    </div>
  </div>

  <script>
    function s4_verifyAnswer(ans) {
      const feedback = document.getElementById('feedback');
      const correct = 'b';
      if (ans === correct) {
        feedback.innerHTML = "‚úîÔ∏è Richtig!";
        feedback.className = "success";
        document.getElementById('zahl-section').classList.remove('hidden');
        try { document.getElementById('zahl-section').scrollIntoView({behavior:'smooth', block:'center'}); } catch(e){}
      } else {
        feedback.innerHTML = "‚ùå Leider falsch.";
        feedback.className = "error";
      }
    }

    function s4_checkCode() {
      const input = parseInt(document.getElementById('input4').value);
      const result = document.getElementById('result4');
      if (input === 9) {
        try { unlockNext(4); } catch(e){}
        result.innerHTML = "‚úÖ Korrekt! Die vierte Ziffer des Codes ist 9.";
        result.className = "success";
      } else {
        result.innerHTML = "‚ùå Leider falsch.";
        result.className = "error";
      }
    }
  </script>



</section>
<section class="station" data-step="5">




  <meta charset="UTF-8">
  <title>Station 5 ‚Äì Michaelis-Menten</title>
  <style>
    body { font-family: sans-serif; background-color: #f3e5f5; padding: 2rem; }
    .task { background: white; padding: 1rem; border-radius: 12px; max-width: 700px; margin: auto; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .choice-button { display: block; margin: 1rem 0; padding: 0.7rem; background: #ce93d8; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; }
    .choice-button:hover { background-color: #ba68c8; }
    .hidden { display: none; }
    .result { font-weight: bold; }
  </style>


  <div class="task">
    <h2>üß™ Station 5 ‚Äì Das Gesetz der Geschwindigkeit</h2>
    <p><em>Ein uraltes Enzymlogbuch ist in deiner Hand. Auf der Innenseite steht:</em></p>
    <blockquote>
      ‚ÄûWenn die Reaktion rast, scheint es, als g√§be es kein Halten. Doch selbst das Schnellste st√∂√üt an eine Grenze.<br>
      Nur wer erkennt, wann der Weg sich flacht, versteht die alte Formel.‚Äú<br><br>
      ‚ÄûDer Schl√ºssel liegt nicht in der Geschwindigkeit ‚Äì sondern in dem, was sie z√§hmt‚Ä¶‚Äú
    </blockquote>
    <p><strong>Welche Aussage ist korrekt?</strong></p>
    <button class="choice-button" onclick="s5_checkAnswer('a')">Je h√∂her die Substratkonzentration, desto niedriger ist die Reaktionsgeschwindigkeit.</button>
    <button class="choice-button" onclick="s5_checkAnswer('b')">Wenn die Substratkonzentration steigt, n√§hert sich die Reaktion asymptotisch dem Vmax.</button>
    <button class="choice-button" onclick="s5_checkAnswer('c')">Die Michaelis-Menten-Gleichung beschreibt ausschlie√ülich kompetitive Hemmung.</button>
    <button class="choice-button" onclick="s5_checkAnswer('d')">Km gibt die Geschwindigkeit an, bei der das Enzym zur H√§lfte aktiv ist.</button>

    <p id="feedback5" class="result"></p>
<p><a href="#" onclick="s5_toggleHilfe5(); return false;">üÜò Hilfekarte ein-/ausblenden</a></p>


    <div id="zahl5-section" class="hidden">
      <p>üîç <strong>Hinweis:</strong> Z√§hle die Anzahl der Buchstaben ‚Äûe‚Äú im gesamten L√∂sungssatz, den du gew√§hlt hast. </p>
      <label for="input5">üî¢ Deine L√∂sung:</label>
      <input id="input5" type="text" placeholder="Zahl eingeben">
      <button onclick="s5_checkCode()">Best√§tigen</button>
      <p id="result5"></p>
          </div>
  </div>

  <div id="hilfe5" class="task hidden" style="background-color:#ede7f6;">
    <h3>üßæ Hilfekarte Station 5</h3>
    <p>Michaelis-Menten-Gleichung:</p>
    <p><code>v = (Vmax ¬∑ [S]) / (Km + [S])</code></p>
    <p>Wenn die Substratkonzentration [S] gleich dem Km ist, dann ist v = Vmax / 2.</p>
  </div>

  <script>
  function s5_toggleHilfe5() {
    const hilfe = document.getElementById('hilfe5');
    hilfe.style.display = (hilfe.style.display === 'none' || hilfe.style.display === '') ? 'block' : 'none';
  }

    function s5_checkAnswer(answer) {
      const correct = 'b';
      const feedback = document.getElementById('feedback5');
      if (answer === correct) {
        feedback.textContent = "‚úîÔ∏è Richtig!";
        feedback.style.color = "green";
        document.getElementById('zahl5-section').classList.remove('hidden');
      } else {
        feedback.textContent = "‚ùå Leider falsch.";
        feedback.style.color = "red";
        // document.getElementById('hilfe5').style.display = 'block';
      }
    }

    function s5_checkCode() {
      const solution = "Wenn die Substratkonzentration steigt, n√§hert sich die Reaktion asymptotisch dem Vmax.";
      const numE = (solution.match(/e/gi) || []).length;
      const qsum = numE.toString().split('').reduce((a,b) => a + parseInt(b), 0);
      const input = document.getElementById('input5').value.trim();
      const result = document.getElementById('result5');
      if (parseInt(input) === qsum) {
        try { unlockNext(5); } catch(e){}
        result.innerHTML = "‚úÖ Korrekt! Die f√ºnfte Ziffer des Codes ist " + qsum + ".";
        result.style.color = 'green';
      } else {
        result.innerHTML = "‚ùå Leider falsch.";
        result.style.color = 'red';
      }
    }
  </script>



</section>
<section class="station" data-step="6">




  <meta charset="UTF-8">
  <title>Station 6 ‚Äì Finales R√§tsel</title>
  <style>
    body { font-family: sans-serif; background-color: #fff3e0; padding: 2rem; }
    .task { background: white; padding: 1rem; border-radius: 12px; max-width: 700px; margin: auto; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .choice-button { display: block; margin: 1rem 0; padding: 0.7rem; background: #ffcc80; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; }
    .choice-button:hover { background-color: #ffb74d; }
    .hidden { display: none; }
    .result { font-weight: bold; }
  </style>


  <div class="task">
    <h2>üß™ Station 6 ‚Äì Der verschl√ºsselte Code des Enzyms</h2>
    <p><em>Du findest ein versiegeltes Reagenzglas mit einer kryptischen Gravur:</em></p>
    <blockquote>
      ‚ÄûNur wer die Sprache der Enzyme spricht, kann den finalen Code knacken.<br>
      Jeder Satz enth√§lt ein Geheimnis ‚Äì doch nur einer sagt die Wahrheit.‚Äú
    </blockquote>
    <p><strong>Welche Aussage ist korrekt?</strong></p>
    <button class="choice-button" onclick="s6_checkAnswer('a')">Enzyme senken die Reaktionsenthalpie, um eine Reaktion zu starten.</button>
    <button class="choice-button" onclick="s6_checkAnswer('b')">Der Michaelis-Wert Km h√§ngt direkt vom pH-Wert ab.</button>
    <button class="choice-button" onclick="s6_checkAnswer('c')">Die Raumstruktur des Enzyms bestimmt, welches Substrat es binden kann.</button>
    <button class="choice-button" onclick="s6_checkAnswer('d')">Eine nicht-kompetitive Hemmung l√§sst sich durch eine Substrat√ºbers√§ttigung aufheben.</button>

    <p id="feedback6" class="result"></p>
<p><a href="#" onclick="s6_toggleHilfe6(); return false;">üÜò Hilfekarte ein-/ausblenden</a></p>


    <div id="zahl6-section" class="hidden">
      <p>üîç <strong>Hinweis:</strong> Rechne den Buchstabenwert von ‚ÄûSubstratspezifit√§t‚Äú (A=1, B=2, ..., Z=26).<br>
      Addiere alle Zahlen ‚Äì und bilde die Quersumme dieser Summe. Das ist die sechste Ziffer.</p>
      <label for="input6">üî¢ Deine L√∂sung:</label>
      <input id="input6" type="text" placeholder="Zahl eingeben">
      <button onclick="s6_checkCode()">Best√§tigen</button>
      <p id="result6"></p>
          </div>
  </div>

  <div id="hilfe6" class="task hidden" style="background-color:#fff8e1;">
    <h3>üßæ Hilfekarte Station 6</h3>
    <p>Enzyme sind substratspezifisch, weil ihre Raumstruktur (Terti√§r- oder Quart√§rstruktur) ein spezifisches aktives Zentrum formt.</p>
    <p>Nur wenn Substrat und Zentrum strukturell zusammenpassen (‚ÄûSchl√ºssel-Schloss-Prinzip‚Äú), funktioniert die Reaktion.</p>
  </div>

  <script>
  function s6_toggleHilfe6() {
    const hilfe = document.getElementById('hilfe6');
    hilfe.style.display = (hilfe.style.display === 'none' || hilfe.style.display === '') ? 'block' : 'none';
  }

    function s6_checkAnswer(answer) {
      const correct = 'c';
      const feedback = document.getElementById('feedback6');
      if (answer === correct) {
        feedback.textContent = "‚úîÔ∏è Richtig!";
        feedback.style.color = "green";
        document.getElementById('zahl6-section').classList.remove('hidden');
      } else {
        feedback.textContent = "‚ùå Leider falsch.";
        feedback.style.color = "red";
      }
    }

    function s6_checkCode() {
      const input = document.getElementById('input6').value.trim();
      const result = document.getElementById('result6');
      if (parseInt(input) === 9) {
        try { unlockNext(6); } catch(e){}
        result.innerHTML = "‚úÖ Korrekt! Die sechste Ziffer des Codes ist 9.";
        result.style.color = 'green';
      } else {
        result.innerHTML = "‚ùå Leider falsch.";
        result.style.color = 'red';
      }
    }
  </script>



</section>
<section class="station" data-step="7">




  <meta charset="UTF-8">
  <title>Escape Game ‚Äì Mission Enzym: Abschluss</title>
  <style>
    body { font-family: sans-serif; background-color: #fff3e0; padding: 2rem; }
    .task { background: white; padding: 1rem; border-radius: 12px; max-width: 700px; margin: auto; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .choice-button { display: block; margin: 1rem 0; padding: 0.7rem; background: #ffcc80; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; }
    .choice-button:hover { background-color: #ffb74d; }
    .hidden { display: none; }
    .result { font-weight: bold; }
  </style>


  <h1 style="text-align:center">üéÆ Escape Game: Mission Enzym üéÆ</h1>
  <p style="text-align:center">Sechs R√§tsel ‚Äì ein Code. Knackt ihn, um das Enzym zu retten!</p>

  <!-- Station 1-6 bleiben unver√§ndert -->

  <!-- STATION 6: Der verschl√ºsselte Code des Enzyms (mit Abschlusseingabe) -->
  <div class="task">
    <h2>üß™ Abschluss: Der geheime 6-stellige Code</h2>
    <p><em>Du hast alle Stationen gemeistert. Um das Enzym zu retten, gib den 6-stelligen Code ein:</em></p>
    <p>Die Ziffern des Codes wurden aus den vorherigen L√∂sungen berechnet und ergeben:</p>
    <p><strong>1. Ziffer:</strong> Station 1 ‚Äì Sortierung von Aminos√§uren <br>
       <strong>2. Ziffer:</strong> Station 2 ‚Äì Strukturebenen der Aminos√§uren <br>
       <strong>3. Ziffer:</strong> Station 3 ‚Äì Enzym-Einflussfaktoren <br>
       <strong>4. Ziffer:</strong> Station 4 ‚Äì Aktivierungsenergie <br>
       <strong>5. Ziffer:</strong> Station 5 ‚Äì Michaelis-Menten <br>
       <strong>6. Ziffer:</strong> Station 6 ‚Äì Schl√ºssel-Schloss-Prinzip</p>
    <label for="finalCode">üîê Gib den Code ein:</label>
    <input id="finalCode" type="text" placeholder="Ziffern eingeben">
    <button onclick="final_check()">Best√§tigen</button>
    <p id="finalResult"></p>
  </div>

  <script>
    // Code der Stationen (Voraussetzung f√ºr den Erfolg)
    const correctCode = "477989";  // Der korrekte 6-stellige Code (jede Ziffer aus den Stationen)

    function final_check() {
      const inputCode = document.getElementById('finalCode').value.trim();
      const result = document.getElementById('finalResult');

      if (inputCode === correctCode) {
        result.innerHTML = "üéâ Herzlichen Gl√ºckwunsch! Du hast den Code geknackt und das Enzym gerettet! üéâ";
        result.style.color = 'green';
      } else {
        result.innerHTML = "‚ùå Leider falsch. Versuch es nochmal.";
        result.style.color = 'red';
      }
    }
  </script>




</section>
</main>

<div class="navline">
  <div class="wrap">
    <button id="prevBtn" class="nav">‚óÄÔ∏é Zur√ºck</button>
    <div style="flex:1"></div>
    <button id="nextBtn" class="nav">Weiter ‚ñ∂Ô∏é</button>
  </div>
</div>

<script>
(function(){
  const total = 8;
  let step = 0;
  const solved = {1:false,2:false,3:false,4:false,5:false,6:false};

  const stations = Array.from(document.querySelectorAll('.station'));
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const label = document.getElementById('stepLabel');
  const bar = document.getElementById('progressBar');

  window.unlockNext = function(which){
    solved[which] = true;
    // Wenn man gerade auf dieser Station ist, Button freischalten
    if (step === which) {
      nextBtn.disabled = false;
      nextBtn.title = '';
    }
  }

  function render(){
    stations.forEach(s => s.classList.remove('active'));
    const current = document.querySelector('.station[data-step="' + step + '"]');
    if (current) current.classList.add('active');
    prevBtn.disabled = (step <= 0);
    // Next-Button-Logik
    if (step === 0) { nextBtn.disabled = false; nextBtn.textContent = 'Weiter ‚ñ∂Ô∏é'; nextBtn.title = ''; }
    else if (step <= 6) {
      nextBtn.disabled = !solved[step];
      nextBtn.title = nextBtn.disabled ? 'L√∂se die Station, um fortzufahren.' : '';
      nextBtn.textContent = 'Weiter ‚ñ∂Ô∏é';
    } else {
      nextBtn.disabled = false;
      nextBtn.textContent = 'Neustart ‚ü≤';
      nextBtn.title = '';
    }
    label.textContent = (step===0 ? 'Intro' : (step <= 6 ? 'Station ' + step : 'Finale')) + ' / ' + total;
    bar.style.width = Math.max(0, Math.round((step)/(total-1) * 100)) + '%';
    window.scrollTo({top: 0, behavior: 'instant'});
  }

  prevBtn.addEventListener('click', () => { if (step > 1) { step--; render(); } });
  nextBtn.addEventListener('click', () => {
    if (step < total) { step++; render(); }
    else { step = 1; render(); }
  });

  function initFromHash(){
    const m = (location.hash || '').match(/step-(\d+)/);
    if (m) {
      const n = parseInt(m[1]);
      if (n >= 1 && n <= total) step = n;
    }
  }

  window.addEventListener('hashchange', () => {
    initFromHash(); render();
  });

  initFromHash();
  render();
})();
</script>

<script>

/* --- Touch Helpers & Mobile UX --- */
(function(){
  // Add tap-to-add for Station 1 draggable items
  const root1 = document.querySelector('.station[data-step="1"]');
  if (root1) {
    const drop = root1.querySelector('#dropzone');
    if (drop) {
      const addItemToDrop = (text) => {
        const newElem = document.createElement('div');
        newElem.textContent = text;
        newElem.className = 'draggable';
        newElem.setAttribute('draggable', 'true');
        // Tap to remove
        newElem.addEventListener('click', () => newElem.remove());
        drop.appendChild(newElem);
      };
      root1.querySelectorAll('.draggable').forEach(el => {
        // If the original item is tapped, clone to dropzone
        el.addEventListener('click', () => addItemToDrop(el.textContent.trim()));
        // Basic touchstart to avoid 300ms delay on some browsers
        el.addEventListener('touchend', (e) => { e.preventDefault(); addItemToDrop(el.textContent.trim()); }, {passive:false});
      });
      // Ensure dropzone is scroll-into-view after a successful order check
      const btn = root1.querySelector('button[onclick^="s1_checkOrder"]') || root1.querySelector('button[onclick^="checkOrder"]');
      if (btn) {
        btn.addEventListener('click', () => {
          try { drop.scrollIntoView({behavior:'smooth', block:'center'}); } catch(e){}
        });
      }
    }
  }

  // Avoid footer covering focused inputs: when focusing input, add extra body padding (small devices)
  const padOnFocus = (e) => {
    const isSmall = window.matchMedia('(max-width: 640px)').matches;
    if (!isSmall) return;
    document.body.style.paddingBottom = '280px';
    setTimeout(() => {
      try { e.target.scrollIntoView({behavior:'smooth', block:'center'}); } catch(ex){}
    }, 50);
  };
  const clearPad = () => {
    document.body.style.paddingBottom = '';
  };
  document.addEventListener('focusin', (e) => {
    if (e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT' || e.target.tagName === 'TEXTAREA')) {
      padOnFocus(e);
    }
  });
  document.addEventListener('focusout', clearPad);
})();

</script>
</body>
</html>
